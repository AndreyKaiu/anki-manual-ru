# Медиафайлы

Anki хранит звуки и изображения, используемые в ваших записях, в папке рядом с коллекцией. Подробнее о расположении папки см. в разделе [Расположение файлов](files.md#user-data). Когда вы добавляете медиафайл в Anki, либо с помощью значка скрепки в [редакторе](editing.md), либо вставляя его в поле, Anki скопирует его из исходного расположения в папку с медиафайлами. Это упрощает резервное копирование медиафайлов вашей коллекции или их перенос на другой компьютер.

Если имена ваших медиафайлов содержат пробелы или другие специальные символы, например знаки процента, то как имена файлов отображаются в HTML-редакторе, будет отличаться от того, как они выглядят на диске. Например, файл с именем `hello 100%.jpg` будет отображаться как `hello%20100%25.jpg` в HTML-редакторе.
Внутренне Anki по-прежнему использует исходные имена файлов, поэтому если вы хотите
[искать](searching.md) файл или изменять имя файла с помощью [Найти и заменить](browsing.md#find-and-replace), вам потребуется использовать имя в том виде, в котором оно отображается на диске, а не так, как оно выглядит в HTML-редакторе. Экспорт в текстовый файл — ещё один способ увидеть внутреннее представление.

## Проверка медиафайлов

Вы можете использовать пункт меню "Инструменты" > "Проверить медиафайлы"  для сканирования ваших записей и папки с медиафайлами. Будет сгенерирован отчёт о файлах в папке с медиафайлами, которые не используются ни в одной записи, а также о медиафайлах, на которые есть ссылки в записях, но которые отсутствуют в вашей папке с медиафайлами. Это также позволяет:

- Удалить неиспользуемые медиафайлы.
- Пометить записи, которые ссылаются на отсутствующие медиафайлы.
- Очистить папку корзины.
- Восстановить удалённые файлы обратно в папку с медиафайлами.

Этот инструмент не сканирует шаблоны вопросов или ответов, поэтому вы не можете размещать ссылки на медиафайлы в полях шаблона. Если вам нужно статичное изображение или звук на каждой карточке, назовите его с ведущим символом \_ (например, `_dog.jpg`), чтобы указать Anki игнорировать его при проверке медиафайлов. Если вы удалите медиафайл с помощью проверки неиспользуемых медиафайлов, Anki переместит его в папку корзины вашей операционной системы, так что вы сможете восстановить его, если случайно удалился медиафайл, который не должен был быть удалён.

## Ручное добавление медиафайлов

Когда вы добавляете медиафайл через интерфейс Anki, программа заботится о том, чтобы имена файлов были закодированы таким образом, чтобы они работали на разных устройствах, удаляя символы, которые не будут работать в определённых операционных системах, и усекая очень длинные имена файлов.

Если вы вручную добавляете файлы в свою [папку с медиафайлами](files.md#user-data), вам следует после этого использовать "Инструменты" > "Проверить медиафайлы", чтобы убедиться, что имена файлов закодированы корректно. Если вы пропустите этот шаг, любые имена файлов, которые несовместимы, будут пропущены при синхронизации.

Anki не следит за символическими ссылками в папке с медиафайлами при синхронизации. Если вы полагаетесь на симлинки (это специальный тип файла, который содержит только путь к другому файлу или каталогу, выступая в роли «ярлыка» или указателя) для включения шрифтов, таблиц стилей или других ресурсов, эти файлы могут работать на компьютере, но не на мобильных устройствах. Чтобы файлы синхронизировались правильно, скопируйте сами файлы в папку `collection.media` вместо использования симлинков.

## Поддерживаемые форматы

Anki использует программу под названием mpv (и mplayer в качестве запасного варианта) для поддержки звуков и видео. Поддерживается много разных форматов файлов, но не все эти форматы будут работать в AnkiWeb и мобильных клиентах. Аудио MP3 и видео MP4, по-видимому, поддерживаются наиболее универсально.