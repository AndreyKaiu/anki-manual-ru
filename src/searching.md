# Поиск

<!-- toc -->

Окно просмотра списка карточек в Anki и функция фильтрованных колод используют общий метод поиска конкретных карточек/записей. Этот метод также может быть использован для корректировки области оптимизации FSRS.

## Простой поиск

Когда вы вводите какой-либо текст в поле поиска, Anki находит соответствующие записи и отображает их карточки. Anki ищет по всем полям записей, но не ищет по меткам (см. [далее в этом разделе](#Метки-колоды-карточки-и-записи) для поиска по меткам). Некоторые примеры:

`dog`\
ищет "dog" в любой части слова — также будет соответствовать таким словам, как "doggy" и "underdog".

`dog cat`\
находит записи, на которых есть и "dog", и "cat", например, "raining cats and dogs".

`dog or cat`\
находит записи с "dog" или "cat".

`dog (cat or mouse)`\
находит записи с "dog" и "cat" или с "dog" и "mouse".

`-cat`\
находит записи без "cat".

`-cat -mouse`\
находит записи без "cat" и без "mouse".

`-(cat or mouse)`\
то же, что и выше.

`"a dog"`\
находит записи с точной последовательностью символов "a dog" в них, например, "atta dog", но не "dog a" и не "adog".

`-"a dog"`\
находит записи без точной последовательности символов "a dog" в них.

`d_g`\
находит записи с d, <один любой символ>, g, например, dog, dig, dug и так далее.

`d*g`\
находит записи с d, <ноль или более любых символов>, g, например, dg, dog, dung и т.д.

`w:dog`\
ищет слово "dog" в отличие от последовательности символов — будет соответствовать "dog", но не "doggy" или "underdog". Требуется Anki 2.1.24+, AnkiMobile 2.1.61+ или AnkiDroid 2.17+. Обратите внимание, что изменения форматирования могут интерпретироваться как границы слов, например, поиск `w:exam` будет соответствовать **exam**ple, так как часть "exam" в слове example выделена жирным шрифтом.

`w:dog*`\
будет соответствовать "dog" и "doggy", но не "underdog".

`w:*dog`\
будет соответствовать "dog" и "underdog", но не "doggy".

Важные моменты из вышесказанного:

- Условия поиска разделяются пробелами.

- Когда предоставлено несколько условий поиска, Anki ищет записи, соответствующие всем условиям — между каждым условием подразумевается `and`. В Anki 2.1.24+, AnkiMobile 2.0.60+ и AnkiDroid 2.17+ вы можете указать явно, если хотите (`dog and cat` — то же самое, что `dog cat`), но более старые версии Anki будут рассматривать `and` как просто ещё одно слово для поиска.

- Вы можете использовать `or`, если вам нужно, чтобы соответствовало только одно из условий.

- Вы можете добавить знак минус (`-`) перед условием, чтобы найти записи, которые не соответствуют этому условию.

- Вы можете группировать условия поиска, помещая их в круглые скобки, как в примере `dog (cat or mouse)`. Это становится важным при объединении поисков OR и AND — в примере с круглыми скобками это соответствует либо "dog cat", либо "dog mouse", тогда как без них это соответствовало бы либо "dog и cat", либо "mouse".

- Anki может выполнять поиск внутри форматирования только в [поле сортировки](editing.md#Настройка-полей), которое вы настроили. Например, если вы добавите "**exa**mple" в одно из ваших полей, причём часть "exa" будет выделена жирным шрифтом, это не будет найдено при поиске `example`, если это поле не является полем сортировки. Если слово не отформатировано или форматирование не меняется в середине слова, то Anki сможет найти его в любом поле. (Возможно anki научат со временем искать и с форматированием, но на начало 2026 года этого нет, а если вам очень требуется поиск и в форматировании, то посмотрите это дополнение [Advanced Browser - mod kaiu 2026](https://ankiweb.net/shared/info/1334324384))

- Стандартный поиск нечувствителен к регистру для латинских символов — a-z будет соответствовать A-Z, и наоборот. Другие символы, такие как кириллица, чувствительны к регистру в стандартном поиске, но могут быть сделаны нечувствительными к регистру с помощью поиска по границе слова или регулярному выражению (`w:`, `re:`).

## Ограничение по полю

Вы также можете попросить Anki находить совпадения только если определённое поле содержит некоторый текст. В отличие от предыдущих примеров поиска, поиск по полям по умолчанию требует точного совпадения.

`front:dog`\
находит записи, у которых поле Front точно равно "dog". Поле с текстом "a dog" не подойдёт.

`"animal front:a dog"`\
находит записи, где поле "Animal Front" точно равно "a dog". Двойные кавычки обязательны: см. [далее в этом разделе](#Сопоставление-специальных-символов).

`front:*dog*`\
находит записи, где поле Front содержит dog где-либо.

`front:`\
находит записи с пустым полем Front.

`front:_*`\
находит записи с непустым полем Front.

`front:*`\
находит записи, у которых есть поле Front, пустое или нет.

`fr*:text`\
находит записи в поле, название которого начинается с "fr". Требуется Anki 2.1.24+, AnkiMobile 2.1.60+ или AnkiDroid 2.17+.

## Метки, колоды, карточки и записи

`tag:animal`\
находит записи с меткой "animal" или дочерние метки, такие как "animal::mammal".

`tag:none`\
находит записи без меток.

`tag:ani*`\
находит записи с метками, начинающимися на "ani".

`deck:french`\
находит карточки в основной колоде с названием "French" или её подколодах, таких как "French::Words". Не будет соответствовать подколодам с таким названием, как например, "Languages::French".

`deck:french::words`\
находит карточки в подколоде "French::Words".

`deck:french -deck:french::*`\
находит карточки в "French", но не в её подколодах.

`deck:"french words"`\
поиск, когда название колоды содержит пробел.

`"deck:french words"`\
то же, что и выше.

`deck:filtered`\
только фильтрованные колоды.

`-deck:filtered`\
только обычные колоды.

`preset:"Default"`\
карточки во всех колодах, которые используют набор настроек колоды "Default". Требуется Anki 23.10+, AnkiMobile 23.10+ или AnkiDroid 2.17+.

`card:forward`\
находит карточки, созданные типом карточки с названием "Forward".

`card:1`\
ищет карточки по номеру типа карточки, например, чтобы найти второй пропуск в записи (задание с пропусками), вы бы использовали `card:2`.

`note:basic`\
ищет карточки, созданные с типом записи с названием "Basic".

## Игнорирование акцентов/комбинируемых символов

Требуется Anki 2.1.24+, AnkiMobile 2.0.60+ или AnkiDroid 2.17+.

Вы можете использовать `nc:` (nc означает "no combining" — без комбинирования), чтобы заставить Anki игнорировать комбинируемые символы (символы предназначенные для модификации предыдущего основного знака). Например:

`nc:uber`\
соответствует записям с "uber", "über", "Über" и т.д.

`nc:は`\
соответствует "は", "ば" и "ぱ".

Поиски, игнорирующие комбинируемые символы, выполняются медленнее, чем обычные поиски.

## Регулярные выражения

Anki 2.1.24+, AnkiMobile 2.0.60+ и AnkiDroid 2.17+ поддерживают поиск по записям с помощью «регулярных выражений», стандартного и мощного способа поиска в тексте.

Начните поиск с `re:`, чтобы использовать регулярные выражения. Для упрощения Anki будет рассматривать следующее как [необработанный ввод](#Необработанный-ввод), поэтому учитывайте правила, перечисленные там.

Некоторые примеры:

`"re:(some|another).*thing"`\
находит записи, содержащие "some" или "another", за которыми следует 0 или более символов, а затем "thing".

`re:\d{3}`\
находит записи, содержащие 3 цифры подряд.

Регулярные выражения также можно ограничить конкретным полем. Обратите внимание, что в отличие от обычного поиска по конкретному полю, регулярные выражения в полях не требуют точного совпадения:

`front:re:[a-c]1`\
соответствует A1, B1 или C1 в верхнем или нижнем регистре, встречающимся в любом месте поля "Front".

`front:re:^[a-c]1$`\
то же, что и предыдущий пример, но не будет соответствовать, если перед или после a1/b1/c1 есть какой-либо другой текст.

Anki 2.1.50+ поддерживает регулярные выражения для меток:

`tag:re:^parent$`\
находит записи с точной меткой "parent", игнорируя любые дочерние метки, такие как "parent::child".

`"tag:re:lesson-(1[7-9]|2[0-5])"`\
находит записи с метками от "lesson-17" до "lesson-25".

Для получения дополнительной информации о регулярных выражениях см. [этот веб-сайт](<https://regexone.com/lesson/introduction_abcs>).

Некоторые моменты, о которых следует знать:

- Поиск нечувствителен к регистру по умолчанию; используйте `(?-i)` в начале, чтобы включить чувствительность к регистру.
- Некоторые тексты, такие как пробелы и переводы строк, могут быть представлены в HTML по-разному — вы можете использовать HTML-редактор на экране редактирования, чтобы увидеть лежащее в основе HTML-содержимое.
- Для подробностей о поддержке регулярных выражений в Anki см. [документацию пакета regex](<https://docs.rs/regex/1.3.9/regex/#syntax>).

## Состояние карточки

`is:due`\
карточки для повторения и карточки на изучении, ожидающие изучения.

`is:new`\
новые карточки.

`is:learn`\
карточки на изучении.

`is:review`\
повторения (как запланированные, так и незапланированные) и просроченные карточки.

`is:suspended`\
карточки, которые были [автоматически](leeches.md) ("пиявки") или вручную исключены.

`is:buried`\
карточки, которые были либо [автоматически](studying.md#Связанные-и-откладывание) отложены, либо отложены вручную.

`is:buried-sibling`\
карточки, которые были автоматически отложены.

`is:buried-manually`\
карточки, которые были отложены вручную.

Карточки, которые [забыли](deck-options.md#Забытые), попадают в несколько предыдущих категорий, поэтому может быть полезно комбинировать разные условия поиска для получения более точных результатов:

`is:learn is:review`\
карточки, которые забыли и ожидают переучивания.

`-is:learn is:review`\
карточки для повторения, не включая забытые карточки.

`is:learn -is:review`\
карточки, которые находятся на изучении впервые.

## Флаги

`flag:0`\
карточки без флага.

`flag:1`\
карточки с красным флагом.

`flag:2`\
карточки с оранжевым флагом.

`flag:3`\
карточки с зелёным флагом.

`flag:4`\
карточки с синим флагом.

`flag:5`\
карточки с розовым флагом.

`flag:6`\
карточки с бирюзовым флагом.

`flag:7`\
карточки с фиолетовым флагом.

## Свойства карточки

`prop:ivl>=10`\
карточки с интервалом 10 дней или более.

`prop:due=1`\
карточки, запланированные на завтра.

`prop:due=-1`\
карточки, запланированные на вчера, на которые ещё не ответили.

`prop:due>=1`\
все карточки, запланированные на будущее, включая завтра.

`prop:due<=-1`\
все просроченные карточки.

`prop:due>=-1 prop:due<=1`\
карточки, запланированные на вчера, сегодня и завтра.

`prop:reps<10`\
карточки, на которые отвечали менее 10 раз.

`prop:lapses>3`\
карточки, которые забывали более 3 раз.

`prop:ease!=2.5`\
карточки легче или сложнее, чем стандартная лёгкость.

`prop:pos<=100`\
новые карточки с позицией в очереди меньше или равной 100.

**Следующие поиски требуют Anki 23.10+ и включённого FSRS:**

`prop:s>21`\
карточки со стабильностью больше 21 дня.

`prop:d>0.3`\
карточки со сложностью больше 0.3.

`prop:r<0.9`\
карточки со вспоминаемостью меньше 0.9.

## Последние события

### Добавленные

`added:1`\
карточки, добавленные сегодня.

`added:7`\
карточки, добавленные за последние 7 дней.

Проверка осуществляется по времени создания карточки, а не времени создания записи, поэтому карточки, созданные в указанный промежуток времени, будут включены, даже если их записи были добавлены давно.

### Отредактированные

`edited:n`\
карточки, в которых текст записи был добавлен/отредактирован за последние n дней.

Это требует Anki 2.1.28+ или AnkiMobile 2.0.64+.

### Изученные

`rated:1`\
карточки, на которые дан ответ сегодня.

`rated:1:2`\
карточки, на которые сегодня ответили «Трудно» (2 кнопка).

`rated:7:1`\
карточки, на которые ответили «Снова» (1 кнопка) за последние 7 дней.

`rated:31:4`\
карточки, на которые ответили «Легко» (4 кнопка) за последние 31 день.

Anki 2.1.39+ поддерживает поиск по оценкам за период более 31 дня.

Обратите внимание, что поиск карточек, на которые ответили в определённый день, `rated:n -rated:(n-1)` может работать не всегда. Вместо этого используйте следующее:

`prop:rated=0`\
карточки, на которые ответили сегодня.

`prop:rated=-1`\
карточки, на которые ответили вчера (1 день до этого).

`prop:rated=-7`\
карточки, на которые ответили 7 дней назад.

### Впервые дан ответ (карты для первого повторения)

Требуется Anki 2.1.45+.

`introduced:1`\
карточки, на которые ответили впервые сегодня.

`introduced:365`\
карточки, на которые ответили впервые за последние 365 дней.

## Сопоставление специальных символов

Если вы используете версию Anki ранее 2.1.36, следующие поиски могут не работать.

Как показано в предыдущем разделе, некоторые символы, такие как `*`, `_` и `"`, имеют особое значение при поиске. Если вам нужно найти эти символы в поиске, вам нужно указать Anki не рассматривать их как особые. Это называется «экранированием символа» и в основном выполняется с помощью двойных кавычек и обратных слешей.

- _Пробел_\
  Чтобы найти что-то, включающее пробелы, заключите `"весь термин"` в двойные кавычки. Если это поиск с двоеточием, у вас также есть возможность заключить в кавычки только `часть:"после двоеточия"`.

- `And`/`Or`\
  Чтобы найти эти слова, заключите их в двойные кавычки. Например, `dog "and" cat` ищет "dog", "cat" и слово "and". Если вы заключите весь поисковый термин в кавычки, как в предыдущем примере, вам не нужно экранировать `and` или `or`.

- `"`, `*` и `_`\
  Добавьте обратный слеш перед этими символами, чтобы рассматривать их буквально. Например, `_` будет соответствовать любому одиночному символу, но `\_` соответствует только фактическому символу подчёркивания.

- `\`\
  Поскольку обратный слеш используется для удаления особого значения других символов, он также рассматривается как особый. Если вам нужно найти фактический обратный слеш, используйте `\\` вместо `\`.

- `(` и `)`\
  Вы можете искать круглые скобки, заключив весь термин в кавычки, используя обратный слеш или оба одновременно. Например, `"(text)"`, `\(text\)` и `"\(text\)"` — это всё эквивалентные поиски, и они ищут `(text)`.

- `-`\
  Начало поискового термина с `-` обычно инвертирует его: `-dog` соответствует всему, кроме dog, например. Если вместо этого вы хотите включить фактический дефис, вы можете использовать обратный слеш или заключить текст в кавычки. Например, `\-free` или `"-free"` будут соответствовать "guilt-free" и "cruelty-free".

- `:`\
  Двоеточия должны быть экранированы с помощью обратных слешей, если перед ними не стоит другое, неэкранированное двоеточие. Например, `w:3:30` ищет "3:30" по границе слова и не требует использования обратного слеша. Однако, если вы не используете поиск с двоеточием, двоеточия нужно экранировать так: `3\:30`.

- `&`, `<` и `>`\
  `&`, `<` и `>` рассматриваются как HTML при поиске в Anki, и поэтому поиски, содержащие их, работают не так, как ожидается. Однако вы можете искать их, используя соответствующие имена HTML-сущностей (`&amp;` для `&`, `&lt;` для `<` и `&gt;` для `>`). Например, поиск `&amp;text` ищет запись с `&text` в поле.

### Необработанный ввод

Текст, предваряемый определёнными ключевыми словами (такими как `re:`), будет рассматриваться как необработанный ввод. То есть символы, перечисленные выше, в значительной степени теряют своё особое значение. В таком контексте для предотвращения неоднозначности требуется минимальное экранирование:

- Двойные кавычки (`"`) должны быть экранированы.

- Пробелы и неэкранированные круглые скобки требуют, чтобы поисковый термин был заключён в кавычки.

- Поисковый термин не должен заканчиваться нечётным количеством обратных слешей.

## Идентификаторы объектов

`nid:123`\
запись с идентификатором записи 123.

`cid:123,456,789`\
все карточки с идентификаторами карточек 123 или 456 или 789.

Идентификаторы записей и карточек можно найти в диалоговом окне [Текущая карточка](stats.md#Информация-о-карточке) в окне "Просмотр". Эти поиски также могут быть полезны при разработке дополнений или другой тесной работе с базой данных.

## Пользовательские данные

Anki позволяет хранить небольшое количество пользовательских данных на карточках, что позволяет реализовывать сложные сценарии, такие как пользовательские планировщики. Одним из известных применений этой функции были ранние реализации FSRS. В Anki 23.10+ есть несколько способов их поиска:

`has-cd:v`\
карточки, имеющие свойство `v` в пользовательских данных.

`prop:cdn:d>5`\
карточки со значением `d` в пользовательских данных (обычно относится к сложности в FSRS) больше 5.

`prop:cds:v=reschedule`\
карточки со строкой `v` в пользовательских данных, равной `reschedule`.

## Другие поиски

`prop:due=1 is:learn`\
междневные карточки на изучении, запланированные на завтра.

`prop:due=0 is:learn -introduced:1`\
междневные карточки на изучении, запланированные на сегодня.

`prop:resched=0`\
карточки, перенесённые сегодня, либо с помощью **Задать срок**, либо **Перепланировать карточки при изменениях**.
